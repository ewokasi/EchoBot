# EchoBot
 libless VK echo chat bot on spring

Главный класс - src/main/java/org/example/echobot/EchoBotApplication.java

Разные сущности, которые приходят с апи - src/main/java/org/example/echobot/dto
- VkCallbackRequst.java - первый уровень (то что приходит в самом начале)
- VkCallbackObject.java - начало парсинга, тут получаем общую инфу и полезные объекты
- VkEventType.java - определяю тип событий для дальнейшего ветвления
- VkClientInfo.java - инфа о клиенте, котороая пришла из VkCallbackObject
- VkMessage.java - то, что больше всего интересует (Текст сообщения и какой чатик)

Как получили запрос, его данные обрабатываются в VkCallbackController.java и отправляются с помощью VkApiService.java

События логируются slf4j.Logger
Отправка сообщений ретраятся
Есть тесты для VkCallbackController 
Конфигурационный файлик для спринга src/main/resources/application.yml
В нем определена чувствительная информация и параметры забуска веб сервера

#С какими трудностями столкнулся: 
1. ВК пушит использовать готовые пакеты, поэтому шустро просмотреть апи схемы проблематично (я их перестал искать и посмотрел на трафик в Wireshark)
2. Для верификации сервера надо использовать колбек, а клиентский интерфейс разрешает посылать запросы для проверки только по 80 порту, который у меня занят. Решил так: Спринг поднял на 81 порту и начал тунелировать трафик через Wireguard. Посылал пакет на VPS по HTTP:80 и получал его на 81 порт на свой пк.
